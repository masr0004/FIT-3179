{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": "Food Price Inflation â€” Monthly Trends by Year (2010â€“2021, Malaysia)",
  "padding": { "top": 16, "right": 8, "bottom": 28, "left": 6 },
  "data": {
    "url": "https://raw.githubusercontent.com/masr0004/FIT-3179/main/Assignment_2/data/consumer-price-indices.csv"
  },

  "config": {
    "view": { "stroke": null },
    "axis": { "grid": true, "labelFontSize": 10, "titleFontSize": 10 }
  },

  "facet": { "field": "Year", "type": "ordinal", "sort": "ascending", "title": null },
  "columns": 4,

  "spec": {
    "transform": [
      { "filter": "lower(datum.Area || '') == 'malaysia'" },
      { "calculate": "toNumber(datum.Value)", "as": "value_num" },
      { "calculate": "toNumber(datum.Year)", "as": "year_num" },
      { "filter": "datum.year_num >= 2010 && datum.year_num <= 2021" },
      { "calculate": "slice(datum.Months, 0, 3)", "as": "month_abbr" }
    ],

    "width": 300,
    "height": 140,

    "layer": [
      {
        "mark": {
          "type": "area",
          "opacity": 0.25,
          "color": "#f28e2b",
          "clip": true
        },
        "transform": [
          { "filter": "lower(datum.Item) == 'food price inflation'" }
        ],
        "encoding": {
          "x": {
            "field": "month_abbr",
            "type": "ordinal",
            "sort": [
              "Jan", "Feb", "Mar", "Apr", "May", "Jun",
              "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"
            ],
            "title": "Month",
            "axis": { "labelAngle": 0, "tickSize": 4, "labelFontSize": 9 }
          },
          "y": {
            "field": "value_num",
            "type": "quantitative",
            "title": "Food Inflation (%)",
            "scale": { "domain": [0, 8] }
          }
        }
      },
      {
        "mark": {
          "type": "line",
          "stroke": "#f28e2b",
          "strokeWidth": 2.5,
          "clip": true
        },
        "transform": [
          { "filter": "lower(datum.Item) == 'food price inflation'" }
        ],
        "encoding": {
          "x": {
            "field": "month_abbr",
            "type": "ordinal",
            "sort": [
              "Jan", "Feb", "Mar", "Apr", "May", "Jun",
              "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"
            ]
          },
          "y": { "field": "value_num", "type": "quantitative" },
          "tooltip": [
            { "field": "month_abbr", "title": "Month" },
            { "field": "Year", "title": "Year" },
            { "field": "value_num", "title": "Food Inflation (%)", "format": ".2f" }
          ]
        }
      },
      {
        "mark": {
          "type": "line",
          "stroke": "#4e79a7",
          "strokeWidth": 2,
          "clip": true
        },
        "transform": [
          { "filter": "lower(datum.Item) == 'consumer prices, food indices'" }
        ],
        "encoding": {
          "x": {
            "field": "month_abbr",
            "type": "ordinal",
            "sort": [
              "Jan", "Feb", "Mar", "Apr", "May", "Jun",
              "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"
            ]
          },
          "y": { "field": "value_num", "type": "quantitative" },
          "tooltip": [
            { "field": "month_abbr", "title": "Month" },
            { "field": "Year", "title": "Year" },
            { "field": "value_num", "title": "Food Index (%)", "format": ".2f" }
          ]
        }
      }
    ]
  }
}
